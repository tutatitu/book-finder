(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();const d="https://openlibrary.org",n={searchInput:document.querySelector(".search-input"),searchButton:document.querySelector(".search-button"),booksGrid:document.querySelector(".books-grid"),bookDetailsOverlay:document.querySelector(".book-details-overlay"),bookDetails:document.querySelector(".book-details")};let l="light";async function u(e){try{return(await(await fetch(`${d}/search.json?q=${encodeURIComponent(e)}`)).json()).docs||[]}catch(t){return console.error("Error searching books:",t),[]}}async function p(e){try{return await(await fetch(`${d}${e}.json`)).json()}catch(t){return console.error("Error fetching book details:",t),null}}function h(e){var o;const t=document.createElement("div");t.className="book-card";const s=e.cover_i,c=s?`https://covers.openlibrary.org/b/id/${s}-M.jpg`:"/placeholder-cover.jpg";return t.innerHTML=`
        <img src="${c}" class="book-cover" alt="${e.title}">
        <h3>${e.title}</h3>
        <p>${((o=e.author_name)==null?void 0:o[0])||"Unknown Author"}</p>
    `,t.addEventListener("click",async()=>{const r=await p(e.key);y(r)}),t}function y(e){n.bookDetails.innerHTML=`
        <h2>${e.title}</h2>
        ${e.description?`<p>${typeof e.description=="string"?e.description:e.description.value}</p>`:""}
        ${e.covers?`<img src="https://covers.openlibrary.org/b/id/${e.covers[0]}-L.jpg" 
            alt="${e.title} Cover" style="max-width: 100%">`:""}
        <p>First published: ${e.first_publish_date||"Unknown"}</p>
        ${e.subjects?`<div class="tags">${e.subjects.slice(0,5).map(t=>`<span class="tag">${t}</span>`).join("")}</div>`:""}
    `,n.bookDetailsOverlay.style.display="flex"}function m(){document.body.classList.toggle("dark-theme");const e=document.querySelector(".theme-toggle");e.textContent=l==="light"?"Light Theme":"Dark Theme",l=l==="light"?"dark":"light",requestAnimationFrame(()=>{document.body.style.display="none",document.body.offsetHeight,document.body.style.display=""})}n.searchButton.addEventListener("click",async()=>{const e=n.searchInput.value.trim();if(!e)return;const t=await u(e);n.booksGrid.innerHTML="",t.slice(0,12).forEach(s=>{n.booksGrid.appendChild(h(s))})});n.bookDetailsOverlay.addEventListener("click",e=>{e.target===n.bookDetailsOverlay&&(n.bookDetailsOverlay.style.display="none")});const i=document.createElement("button");i.className="theme-toggle";i.textContent="Toggle Theme";i.addEventListener("click",m);document.body.appendChild(i);n.searchInput.addEventListener("keypress",e=>{e.key==="Enter"&&n.searchButton.click()});
